import{r as t,h as i,a}from"./p-c4393f38.js";const s=class{constructor(i){t(this,i),this.hideCssClass="c-pager-hide",this.attrSelectorPage="data-page",this.attrSelectorModule="data-module",this.attrSelectorLabel="data-label",this.starterPageIndex=1,this.moduleDictionary={introducao:"Introdução",atividade:"Atividade",conclusao:"Conclusão"},this.labelDictionary={conceito:"Conceito",atividade:"Atividade",teexplico:"Vem que eu te explico!"},this.total=0,this.current=0}_getModulePagination(t,i,a){let s=[];const e=Boolean(null==a?void 0:a.length),o=document.querySelectorAll(e?`[${this.attrSelectorModule}="${t}"][${this.attrSelectorLabel}="${a}"]`:`[${this.attrSelectorModule}="${t}"]:not([${this.attrSelectorLabel}])`);return null==o||o.forEach((t=>{const i=t.getAttribute(this.attrSelectorPage);s.includes(i)||s.push(Number(i))})),s.sort(((t,i)=>t>i?1:t<i?-1:0)),{total:s.length-(e?0:1),atual:s.findIndex((t=>t===i))+(e?1:0)}}_getLabelModule(t,a){return i("div",{class:"c-pager-label-module"},i("span",{class:"c-pager-label-module-text"},t),Boolean(null==a?void 0:a.length)&&i("span",{class:"c-pager-label-module-count"},a))}_getLabel(){const t=$(`[${this.attrSelectorPage}="${this.current}"]`),a=t.attr(this.attrSelectorModule),s=t.attr(this.attrSelectorLabel);let e;if(isNaN(Number(a)))e=i("div",{class:"c-pager-label-container"},this._getLabelModule(this.moduleDictionary[a]||""));else{const o=this._getModulePagination(Number(a),this.current,s);e="YDUQS-MODULE-COVER"===t.get(0).tagName?i("div",{class:"c-pager-label-container"},this._getLabelModule("Módulo",a)):i("div",{class:"c-pager-label-container"},i("div",{class:"c-pager-label-page"},i("span",{class:"c-pager-label-page-text"},this.labelDictionary[s]||this.labelDictionary.conceito),i("span",{class:"c-pager-label-page-count"},i("strong",null,o.atual)," / ",i("strong",null,o.total))),i("div",{class:"c-pager-label-separator"},"|"),this._getLabelModule("Módulo",a))}return e}_goToPage(){window.scrollTo(0,0),this._resetHash(),$(`[${this.attrSelectorPage}]`).addClass(this.hideCssClass),$(`[${this.attrSelectorPage}="${this._getCurrentPage()}"]`).removeClass(this.hideCssClass),this._getCurrentPage()<=this.starterPageIndex?this.btnPrev.disabled=!0:this.btnPrev.removeAttribute("disabled"),this._getCurrentPage()>=this.total?this.btnNext.disabled=!0:this.btnNext.removeAttribute("disabled")}_setCurrentPage(t){this.current=t<this.starterPageIndex?this.starterPageIndex:t>this.total?this.total:t}_getCurrentPage(){return this.current}_init(){const t=document.querySelectorAll(`[${this.attrSelectorPage}]`);let i=0;null==t||t.forEach((t=>{const a=Number(t.getAttribute(this.attrSelectorPage));i=i<a?a:i})),this.total=i,this._setCurrentPage(this.starterPageIndex)}_goToPrev(){this._setCurrentPage(this._getCurrentPage()-1)}_goToNext(){this._setCurrentPage(this._getCurrentPage()+1)}_getPageFromElement(t){var i,a,s,e;const o=(null==t?void 0:t.length)>1&&$(t);let n;return o.attr(this.attrSelectorPage)?n=o.attr(this.attrSelectorPage):(null===(i=o.children(`[${this.attrSelectorPage}]`))||void 0===i?void 0:i.length)>0&&o.children(`[${this.attrSelectorPage}]`).eq(0)?n=null===(s=null===(a=o.children(`[${this.attrSelectorPage}]`))||void 0===a?void 0:a.eq(0))||void 0===s?void 0:s.attr(this.attrSelectorPage):o.closest(`[${this.attrSelectorPage}]`)&&(n=null===(e=o.closest(`[${this.attrSelectorPage}]`))||void 0===e?void 0:e.attr(this.attrSelectorPage)),n}_resetHash(){const t=window.location.hash;if((null==t?void 0:t.length)>1){const i=this._getPageFromElement(t),a=this._getCurrentPage();Number(i)!==a&&(window.location.hash="")}}clickMenuTitleHandler(t){var i;this._setCurrentPage(parseInt(null===(i=t.detail.closest(`[${this.attrSelectorPage}]`))||void 0===i?void 0:i.getAttribute(this.attrSelectorPage)))}componentDidLoad(){window.addEventListener("yduqs-search-before-navigate",(t=>{var i;this._setCurrentPage(Number((null===(i=t.detail)||void 0===i?void 0:i.page)||this.starterPageIndex))})),window.addEventListener("hashchange",(()=>{var t;const i=(null===(t=window.location.hash)||void 0===t?void 0:t.length)>1&&window.location.hash;if(i){let t=this._getPageFromElement(i);t&&this._setCurrentPage(parseInt(t))}})),this._init()}render(){return i(a,null,i("div",{class:"c-pager "+(this.total<=1?"c-pager-none":""),id:"btnPaginator"},i("button",{"data-gtm-event-category":"joana:[[instituicao]]:[[tipo-usuario]]","data-gtm-event-action":"paginacao:conteudo-clique-botao","data-gtm-event-label":"voltar",disabled:!0,type:"button",class:"c-button c-button__icon-container c-button__icon-square","data-cy":"btn-prev",ref:t=>this.btnPrev=t,onClick:()=>this._goToPrev()},i("span",{class:"c-button__icon material-icons"},"arrow_back")),this._getLabel(),i("button",{"data-gtm-event-category":"joana:[[instituicao]]:[[tipo-usuario]]","data-gtm-event-action":"paginacao:conteudo-clique-botao","data-gtm-event-label":"avancar",type:"button",class:"c-button c-button__icon-container c-button__icon-square","data-cy":"btn-next",ref:t=>this.btnNext=t,onClick:()=>this._goToNext()},i("span",{class:"c-button__icon material-icons"},"arrow_forward"))))}static get watchers(){return{current:["_goToPage"]}}};export{s as yduqs_pager}