import{r as t,h as e,g as s}from"./p-c4393f38.js";const o=class{constructor(e){t(this,e),this.text_console="",this.text_response="",this.response_active=!1}async copy(t){navigator.clipboard.writeText(t)}async GET(t,e){var s=new XMLHttpRequest;return s.withCredentials=!1,s.open(t,e,!1),s.setRequestHeader("x-rapidapi-key","5c5fc15161msh1ed684ed727dacdp1856e4jsn507d3fc3d8ce"),s.setRequestHeader("x-rapidapi-host","paiza-io.p.rapidapi.com"),s.send(null),s.responseText}async runCompilerDesktop(){this.text_console='<yduqs-loading open message="Estamos compilando o código."></yduqs-loading>',this.response_active=!1,setTimeout((()=>{this.runCompilerAPI()}),100)}runCompilerMobile(){this.text_console='<yduqs-loading open message="Estamos compilando o código."></yduqs-loading>',this.response_active=!1,this.el.querySelector("yduqs-tabs").openTab(1),setTimeout((()=>{this.runCompilerAPI()}),100)}async runCompilerAPI(){var t="https://paiza-io.p.rapidapi.com/runners/create?source_code="+encodeURIComponent(this.current_code)+"&input="+encodeURIComponent(this.el.querySelector(".content_input pre").innerHTML.replace(/<br ?\/?>/g,"\n"))+"&language="+this.language_code+"&longpoll=true&api_key=guest",e="https://paiza-io.p.rapidapi.com/runners/get_status?id="+JSON.parse(await this.GET("POST",t)).id+"&api_key=guest",s=JSON.parse(await this.GET("GET",e));if("completed"==s.status){var o="https://paiza-io.p.rapidapi.com/runners/get_details?id="+s.id+"&api_key=guest",i=JSON.parse(await this.GET("GET",o));"success"==i.result?(this.response_active=!0,this.text_response=i.stdout):(this.response_active=!1,this.text_console='<span class="error-compiler">'+i.stderr+"</span>")}}textChangeHandler(t){this.current_code=t.detail}setInput(){this.el.querySelector(".content_input pre").innerHTML=decodeURIComponent(this.input_keyboard),this.el.querySelector(".content_input-tab pre").innerHTML=decodeURIComponent(this.input_keyboard)}updateInput(){this.el.querySelector(".content_input pre").innerHTML=this.el.querySelector(".content_input-tab pre").innerHTML}updateInputTab(){this.el.querySelector(".content_input-tab pre").innerHTML=this.el.querySelector(".content_input pre").innerHTML}componentWillRender(){this.isDark=this.dark}componentDidLoad(){null==this.current_code&&(this.current_code=decodeURIComponent(this.code)),"python"!==this.language_code&&"python2"!==this.language_code&&"python3"!==this.language_code||(this.language_code="python3"),this.setInput()}render(){return[e("div",{class:"c-code-compiler "+(this.isDark?"dark":"")},e("div",{class:"top d-flex align-items-center justify-content-between"},e("span",{class:"title"},this.exercise_title),e("span",{class:"material-icons icon",onClick:()=>this.copy(this.current_code)},"content_copy")),e("div",{class:"box"},e("div",{class:"box-code"},e("span",{class:"title_code"},this.language_code),e("stace-editor",{class:"content_code",mode:this.language_code,theme:this.isDark?"monokai":"chrome",readOnly:!1,autoUpdateContent:!0,durationBeforeCallback:1e3},decodeURIComponent(this.code))),e("div",{class:"box-input-console"},e("div",{class:"box-input"},e("span",{class:"title_input"},"Input"),e("div",{class:"content_input",onInput:()=>this.updateInputTab()},e("pre",{autocorrect:"off",autocapitalize:"off",spellcheck:"false",contenteditable:"true"}))),e("div",{class:"box-console"},e("span",{class:"title_console"},"Console"),e("div",{class:"button_console"},e("button",{class:"c-button c-button__icon-container "+(this.isDark?"c-button--dark":""),type:"button",onClick:()=>this.runCompilerDesktop()},e("span",{class:"c-button__icon-text-right material-icons"},"play_arrow"),"Executar")),this.response_active?e("textarea",{class:"content_response",autocorrect:"off",autocapitalize:"off",spellcheck:"false",contenteditable:"false",disabled:!0,innerHTML:this.text_response}):e("div",{class:"content_console",autocorrect:"off",autocapitalize:"off",spellcheck:"false",contenteditable:"false",innerHTML:this.text_console})),e("div",{class:"box-mobile"},e("yduqs-tabs",{darkmode:!1},e("yduqs-tab",{header:"Input",open:!0},e("div",{class:"box-input-tab"},e("div",{class:"content_input-tab",onInput:()=>this.updateInput()},e("pre",{autocorrect:"off",autocapitalize:"off",spellcheck:"false",contenteditable:"true"})))),e("yduqs-tab",{header:"Console"},e("div",{class:"box-console-tab"},this.response_active?e("textarea",{class:"content_response-tab",autocorrect:"off",autocapitalize:"off",spellcheck:"false",contenteditable:"false",disabled:!0,innerHTML:this.text_response}):e("div",{class:"content_console-tab",autocorrect:"off",autocapitalize:"off",spellcheck:"false",contenteditable:"false",innerHTML:this.text_console})))),e("div",{class:"button_console-mobile"},e("button",{class:"c-button c-button__icon-container u-text--small "+(this.isDark?"c-button--dark":""),type:"button",onClick:()=>this.runCompilerMobile()},e("span",{class:"c-button__icon-text-right material-icons"},"play_arrow")))))))]}get el(){return s(this)}};export{o as yduqs_code_compiler}