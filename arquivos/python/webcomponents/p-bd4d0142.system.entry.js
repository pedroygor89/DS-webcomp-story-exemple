System.register(["./p-aa0e6d07.system.js"],(function(t){"use strict";var e,i,n;return{setters:[function(t){e=t.r;i=t.h;n=t.a}],execute:function(){var r=t("yduqs_zoom_full_screen",function(){function t(t){e(this,t);this.max=20;this.min=0;this.step=1;this.val=0;this.evCache=new Array;this.prevDiff=-1;this.mouseScrollEventName="onwheel"in document?"wheel":"onmousewheel"in document?"mousewheel":"DOMMouseScroll";this.lastX=0;this.lastY=0;this.refX=0;this.refY=0}t.prototype.handleClick=function(t){var e=t.target.className;var i=e.split(" ");if(i.includes("p-img")||i.includes("p-btn")){this.fullScreen=!this.fullScreen}};t.prototype.reset=function(){if(this.fullScreen){this.initialWidth=this.img.clientWidth}this.rangeOutput(0);this.setImgMargins({left:0,top:0})};t.prototype.setImgWidth=function(t){this.img.style.width="calc(".concat(this.initialWidth,"px + ").concat(t*10,"%)")};t.prototype.isNegative=function(t){return t<0};t.prototype.setImgMargins=function(t){var e=this.img.clientHeight;var i=this.img.clientWidth;var n=this.container.clientHeight;var r=this.container.clientWidth;var s=i<=r?0:(i-r)/2;var a=e<=n?0:(e-n)/2;var o;if(this.isNegative(t.left)){o=t.left<-s?-s:t.left}else{o=t.left>s?s:t.left}var h;if(this.isNegative(t.top)){h=t.top<-a?-a:t.top}else{h=t.top>a?a:t.top}this.lastX=o;this.lastY=h;this.img.style.marginLeft="".concat(o,"px");this.img.style.marginTop="".concat(h,"px")};t.prototype.rangeOutput=function(t){this.val=t>this.max?this.max:t<this.min?this.min:t;this.setImgWidth(this.val);this.setImgMargins({left:this.lastX,top:this.lastY})};t.prototype.handlePointerDown=function(t){this.evCache.push(t)};t.prototype.handlePointerMove=function(t){for(var e=0;e<this.evCache.length;e++){if(t.pointerId==this.evCache[e].pointerId){this.evCache[e]=t;break}}if(this.evCache.length==2){var i=Math.abs(this.evCache[0].clientX-this.evCache[1].clientX);if(this.prevDiff>0){if(i>this.prevDiff){this.rangeOutput(this.val+this.step)}if(i<this.prevDiff){this.rangeOutput(this.val-this.step)}}this.prevDiff=i}};t.prototype.handlePointerUp=function(t){this.removeEvent(t);if(this.evCache.length<2)this.prevDiff=-1};t.prototype.removeEvent=function(t){for(var e=0;e<this.evCache.length;e++){if(this.evCache[e].pointerId==t.pointerId){this.evCache.splice(e,1);break}}};t.prototype.handleTouchStart=function(t){var e;if(((e=t.targetTouches)===null||e===void 0?void 0:e.length)===2){t.preventDefault()}};t.prototype.scrollDirectionIsUpDown=function(t){return(t.deltaY||t.wheelDeltaY)!==0};t.prototype.normalizeScrollData=function(t){var e;if(t.wheelDelta){e=t.wheelDelta%120-0==-0?t.wheelDelta/120:t.wheelDelta/12}else{var i=t.deltaY?t.deltaY:t.detail;e=-(i%3?i*10:i/3)}return e};t.prototype.handleMouseScroll=function(t){if(!this.fullScreen||!this.scrollDirectionIsUpDown(t))return;t.preventDefault();if(this.normalizeScrollData(t)>0){this.rangeOutput(this.val+this.step)}else{this.rangeOutput(this.val-this.step)}};t.prototype.handleDragStart=function(t){this.dragXStart=t.screenX;this.dragYStart=t.screenY};t.prototype.handleDragOver=function(t){this.setImgMargins({top:this.lastY+(t.screenY-this.dragYStart)*.07,left:this.lastX+(t.screenX-this.dragXStart)*.07})};t.prototype.handleDragEnd=function(t){this.lastX=this.lastX+(t.screenX-this.dragXStart);this.lastY=this.lastY+(t.screenY-this.dragYStart)};t.prototype.handleTouchDragStart=function(t){var e;if(((e=t.targetTouches)===null||e===void 0?void 0:e.length)===1){var i=t.targetTouches[0];this.dragXStart=i===null||i===void 0?void 0:i.screenX;this.dragYStart=i===null||i===void 0?void 0:i.screenY}};t.prototype.handleTouchDragMove=function(t){var e;if(((e=t.targetTouches)===null||e===void 0?void 0:e.length)===1){var i=t.targetTouches[0];var n=(i.screenX-this.dragXStart)*.1;var r=(i.screenY-this.dragYStart)*.1;this.setImgMargins({left:this.lastX+(n!=this.refX?n:0),top:this.lastY+(r!=this.refY?r:0)});this.refX=n!=this.refX?n:this.refX;this.refY=r!=this.refY?r:this.refY}};t.prototype.handleTouchDragEnd=function(t){var e;if(((e=t.targetTouches)===null||e===void 0?void 0:e.length)===1){var i=t.targetTouches[0];this.lastX=this.lastX+(i.screenX-this.dragXStart);this.lastY=this.lastY+(i.screenY-this.dragYStart)}};t.prototype.componentDidLoad=function(){var t=this;this.img.onpointerdown=function(e){return t.handlePointerDown(e)};this.img.onpointermove=function(e){return t.handlePointerMove(e)};this.img.onpointerup=function(e){return t.handlePointerUp(e)};this.img.onpointercancel=function(e){return t.handlePointerUp(e)};this.img.onpointerout=function(e){return t.handlePointerUp(e)};this.img.onpointerleave=function(e){return t.handlePointerUp(e)};this.img.addEventListener("touchstart",(function(e){return t.handleTouchStart(e)}),{passive:false});this.img.addEventListener(this.mouseScrollEventName,(function(e){return t.handleMouseScroll(e)}))};t.prototype.render=function(){var t=this;return i(n,{class:"c-image-full-screen"},i("div",{class:"p-".concat(this.fullScreen?"full-screen":"preview"),ref:function(e){return t.container=e}},i("button",{type:"button",class:"c-button c-button__icon-container c-button__icon-small u-text--small p-btn p-open-in-full"},i("span",{class:"p-btn c-button__icon material-icons"},this.fullScreen?"close":"open_in_full")),i("img",{draggable:true,onTouchStart:function(e){return t.handleTouchDragStart(e)},onTouchMove:function(e){return t.handleTouchDragMove(e)},onTouchEnd:function(e){return t.handleTouchDragEnd(e)},onDragStart:function(e){return t.handleDragStart(e)},onDragOver:function(e){return t.handleDragOver(e)},onDragEnd:function(e){return t.handleDragEnd(e)},class:"p-img",src:this.src,alt:this.alt,ref:function(e){return t.img=e}}),this.fullScreen&&i("div",{class:"p-range-container"},i("yduqs-range",{max:this.max,min:this.min,step:this.step,value:this.val,output:function(e){return t.rangeOutput(e)}}))))};Object.defineProperty(t,"watchers",{get:function(){return{fullScreen:["reset"]}},enumerable:false,configurable:true});return t}())}}}));