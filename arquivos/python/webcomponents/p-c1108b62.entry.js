import{r as t,h as e,a as s}from"./p-c4393f38.js";import{d as i}from"./p-d99c9a08.js";const o=class{constructor(e){t(this,e),this.project_python=!1,this.hideCssClass="c-pager-hide",this.attrSelectorPage="data-page",this.attrSelectorModule="data-module",this.attrSelectorLabel="data-label",this.starterPageIndex=1,this.moduleDictionary={introducao:"Introdução",atividade:"Atividade",conclusao:"Conclusão"},this.labelDictionary={conceito:"Conceito",atividade:"Atividade",teexplico:"Vem que eu te explico!"},this.total=0,this.current=0}_getModulePagination(t,e,s){let i=[];const o=Boolean(null==s?void 0:s.length),a=document.querySelectorAll(o?`[${this.attrSelectorModule}="${t}"][${this.attrSelectorLabel}="${s}"]`:`[${this.attrSelectorModule}="${t}"]:not([${this.attrSelectorLabel}])`);return null==a||a.forEach((t=>{const e=t.getAttribute(this.attrSelectorPage);i.includes(e)||i.push(Number(e))})),i.sort(((t,e)=>t>e?1:t<e?-1:0)),{total:i.length-(o?0:1),atual:i.findIndex((t=>t===e))+(o?1:0)}}_getLabelModule(t,s){return e("div",{class:"c-pager-label-module"},e("span",{class:"c-pager-label-module-text"},t),Boolean(null==s?void 0:s.length)&&e("span",{class:"c-pager-label-module-count"},s))}_getLabel(){const t=$(`[${this.attrSelectorPage}="${this.current}"]`),s=t.attr(this.attrSelectorModule),o=t.attr(this.attrSelectorLabel);let a;if(isNaN(Number(s)))a=e("div",{class:"c-pager-label-container"},this._getLabelModule(this.moduleDictionary[s]||""));else{const n=this._getModulePagination(Number(s),this.current,o);"YDUQS-MODULE-COVER"===t.get(0).tagName?(i("yduqs-pager-module-cover",{iscover:!0}),a=e("div",{class:"c-pager-label-container"},this._getLabelModule("Módulo",s))):(i("yduqs-pager-module-cover",{iscover:!1}),a=e("div",{class:"c-pager-label-container"},e("div",{class:"c-pager-label-page"},e("span",{class:"c-pager-label-page-text"},this.labelDictionary[o]||this.labelDictionary.conceito),e("span",{class:"c-pager-label-page-count"},e("strong",null,n.atual)," / ",e("strong",null,n.total))),e("div",{class:"c-pager-label-separator"},"|"),this._getLabelModule("Módulo",s)))}return a}_goToPage(){window.scrollTo(0,0),this._resetHash(),$(`[${this.attrSelectorPage}]`).addClass(this.hideCssClass),$(`[${this.attrSelectorPage}="${this._getCurrentPage()}"]`).removeClass(this.hideCssClass),this._getCurrentPage()<=this.starterPageIndex?(this.btnPrev.disabled=!0,document.body.classList.contains("project_python")&&(document.querySelector("yduqs-pager").classList.add("d-none"),document.body.classList.add("pager_first_page"))):(this.btnPrev.removeAttribute("disabled"),document.body.classList.contains("project_python")&&(document.querySelector("yduqs-pager").classList.remove("d-none"),document.body.classList.remove("pager_first_page"))),this._getCurrentPage()>=this.total?(document.body.classList.add("pager_last_page"),this.btnNext.disabled=!0):(document.body.classList.remove("pager_last_page"),this.btnNext.removeAttribute("disabled"))}_setCurrentPage(t){const e=t<this.starterPageIndex?this.starterPageIndex:t>this.total?this.total:t;i("yduqs-pager-before-change",{from:this.current,to:e,total:this.total}),this.current=e,document.querySelector("yduqs-pager").setAttribute("current-page",`${this.current}`),document.body.setAttribute("current-page",`${this.current}`)}_getCurrentPage(){return this.current}_init(){const t=document.querySelectorAll(`[${this.attrSelectorPage}]`);let e=0;null==t||t.forEach((t=>{const s=Number(t.getAttribute(this.attrSelectorPage));e=e<s?s:e})),this.total=e,this._setCurrentPage(this.starterPageIndex)}_goToPrev(){this._setCurrentPage(this._getCurrentPage()-1)}_goToNext(){this._setCurrentPage(this._getCurrentPage()+1)}_getPageFromElement(t){var e,s,i,o;const a=(null==t?void 0:t.length)>1&&$(t);let n;return a.attr(this.attrSelectorPage)?n=a.attr(this.attrSelectorPage):(null===(e=a.children(`[${this.attrSelectorPage}]`))||void 0===e?void 0:e.length)>0&&a.children(`[${this.attrSelectorPage}]`).eq(0)?n=null===(i=null===(s=a.children(`[${this.attrSelectorPage}]`))||void 0===s?void 0:s.eq(0))||void 0===i?void 0:i.attr(this.attrSelectorPage):a.closest(`[${this.attrSelectorPage}]`)&&(n=null===(o=a.closest(`[${this.attrSelectorPage}]`))||void 0===o?void 0:o.attr(this.attrSelectorPage)),n}_resetHash(){const t=window.location.hash;if((null==t?void 0:t.length)>1){const e=this._getPageFromElement(t),s=this._getCurrentPage()+1;Number(e)!==s&&(window.location.hash="")}}clickMenuTitleHandler(t){var e;this._setCurrentPage(parseInt(null===(e=t.detail.closest(`[${this.attrSelectorPage}]`))||void 0===e?void 0:e.getAttribute(this.attrSelectorPage)))}componentWillLoad(){document.body.classList.contains("project_python")&&(this.project_python=!0,document.querySelector("#start_class").addEventListener("click",(()=>{this._goToNext()})))}componentDidLoad(){window.addEventListener("yduqs-search-before-navigate",(t=>{var e;this._setCurrentPage(Number((null===(e=t.detail)||void 0===e?void 0:e.page)||this.starterPageIndex))})),window.addEventListener("yduqs-pager-module-cover",(t=>{t.detail.iscover?document.body.classList.add("pager_module_cover"):document.body.classList.remove("pager_module_cover")})),window.addEventListener("hashchange",(()=>{var t;const e=(null===(t=window.location.hash)||void 0===t?void 0:t.length)>1&&window.location.hash;if(e){let t=this._getPageFromElement(e);t&&this._setCurrentPage(parseInt(t))}})),$("body").on("click",'a[href^="#"]',(t=>{var e;t.preventDefault();const s=null===(e=t.currentTarget.href)||void 0===e?void 0:e.substring(t.currentTarget.href.indexOf("#"),t.currentTarget.href.length);if(s){let t=this._getPageFromElement(s);t&&this._setCurrentPage(parseInt(t))}window.location.hash==s?window.scrollTo(0,$(window.location.hash).offset().top):window.location.hash=s})),this._init(),document.body.setAttribute("pages",this.total.toString())}render(){return e(s,null,e("div",{class:`c-pager ${this.total<=1?"c-pager-none":""} ${this.project_python&&"python_pager"} `,id:"btnPaginator"},e("div",{class:"container"},e("div",{class:"row align-items-center justify-content-center"},e("div",{class:"col-12 col-md-10 col-lg-8 d-flex"},e("button",{disabled:!0,type:"button",class:"c-button c-button__icon-container c-button__icon-square pager-switch","data-cy":"btn-prev",ref:t=>this.btnPrev=t,onClick:()=>this._goToPrev()},e("span",{class:"c-button__icon material-icons"},"arrow_back")),this._getLabel(),e("button",{type:"button",class:"c-button c-button__icon-container c-button__icon-square pager-switch","data-cy":"btn-next",ref:t=>this.btnNext=t,onClick:()=>this._goToNext()},e("span",{class:"c-button__icon material-icons"},"arrow_forward")))))))}static get watchers(){return{current:["_goToPage"]}}};export{o as yduqs_pager}