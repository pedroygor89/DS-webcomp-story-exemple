var positiveFeedbacks = [], negativeFeedbacks = [], question_answers = [], questionBlocks = $("div.question-block"); questionBlocks.each(function () { var e = $(this), s = e.closest("yduqs-questions").attr("exercise_id"); void 0 !== s && !1 !== s && e.attr("exercise", "true"); var n = e.find(".question-positive-feedback"), a = e.find(".question-negative-feedback"), t = n.html(); positiveFeedbacks.push(decodeURIComponent(t)); var i = a.html(); if (negativeFeedbacks.push(decodeURIComponent(i)), printVersion) n.html(decodeURIComponent(t)), a.html(decodeURIComponent(i)); else { if ("en-us" == htmlLanguage) var o = "<p>Waiting for student response..</p>"; else if ("es" == htmlLanguage) o = "<p>Esperando la respuesta del estudiante...</p>"; else o = "<p>Aguardando a resposta do aluno...</p>"; n.html(o), a.html(o) } chosenLetterLocation = e.closest("yduqs-card-selecionavel-item").attr("id"), $(this).removeClass("question-loading") }); var finalAnswer = "unanswered", findButtons = $(".question-block").find('button[type="button"]'); findButtons.each(function (e) { $(this).attr("question-reference", e), $(this).on("click", function () { if (getBlock = $('.question-block[question-reference="' + e + '"]'), getQuestion = $('.question-block[question-reference="' + e + '"]').find("yduqs-card-selecionavel"), hasFinalAnswer = getQuestion.attr("final-answer"), null == hasFinalAnswer) { document.querySelector("#question-warning").show() } else { var s = finalAnswer.charCodeAt(0) - 97 + 1; if (feedbackPositiveLocation = findButtons.closest('.question-block[question-reference="' + e + '"]').find(".question-positive-feedback"), feedbackNegativeLocation = findButtons.closest('.question-block[question-reference="' + e + '"]').find(".question-negative-feedback"), block = $(this).closest(".question-block"), blockDone = block.hasClass("answered"), optionList = $(this).closest(".question-block").find("yduqs-card-selecionavel"), optionListOptions = optionList.find("yduqs-card-selecionavel-item"), optionListOptions.each(function () { $(this).attr("disabled", ""), $(this).addClass("unchecked-answer") }), optionList.find("yduqs-card-selecionavel-item#card-selecionavel-" + finalAnswer).removeClass("unchecked-answer"), optionList.find("yduqs-card-selecionavel-item#card-selecionavel-" + finalAnswer).attr("disabled", ""), optionList.find("yduqs-card-selecionavel-item#card-selecionavel-" + finalAnswer).attr("selected", ""), btnTryAgain = $(this).hasClass("retry-button"), 0 == btnTryAgain) if (s == question_answers[e]) { if (a = (a = $(this).closest(".c-questions").find(`.question-block[question-reference="${e}"]`)).attr("exercise"), "en-us" == htmlLanguage) var n = `Congratulations! Option  <span class="text-uppercase">${finalAnswer}</span> is correct.`; else if ("es" == htmlLanguage) n = `Enhorabuena! La alternativa <span class="text-uppercase">${finalAnswer}</span> es correcta.`; else n = `Parabéns! A alternativa <span class="text-uppercase">${finalAnswer}</span> está correta.`; if (void 0 !== a && !1 !== a) "undefined" === positiveFeedbacks[e] ? feedbackPositiveLocation.html(`\n                            <yduqs-card-destaque grade="2" outline="false" icon="check_circle">\n                            <yduqs-card-destaque-header>\n                                <h2 class="c-heading u-large mb-5">${n}</h2>\n                            </yduqs-card-destaque-header>\n                        </yduqs-card-destaque>\n                        `) : feedbackPositiveLocation.html(`\n                            <yduqs-card-destaque grade="2" outline="false" icon="check_circle">\n                            <yduqs-card-destaque-header>\n                                <h2 class="c-heading u-large">${n}</h2>\n                            </yduqs-card-destaque-header>\n                            <yduqs-card-destaque-body>\n                                <p class="c-paragraph">${positiveFeedbacks[e]}</p>\n                            </yduqs-card-destaque-body>\n                        </yduqs-card-destaque>\n                        `); else feedbackPositiveLocation.html(`\n                            <yduqs-card-destaque grade="2" outline="false" icon="check_circle">\n                            <yduqs-card-destaque-header>\n                                <h2 class="c-heading u-large">${n}</h2>\n                            </yduqs-card-destaque-header>\n                            <yduqs-card-destaque-body>\n                                <p class="c-paragraph">${positiveFeedbacks[e]}</p>\n                            </yduqs-card-destaque-body>\n                        </yduqs-card-destaque>\n                        `); void 0 !== (t = $(this).closest("yduqs-questions").attr("math")) && !1 !== t && reloadMath(), feedbackPositiveLocation.toggleClass("d-none"), $(this).closest(".question-button").addClass("d-none"), optionListOptions.removeAttr("final-answer"), optionList.find("yduqs-card-selecionavel-item .c-card-selecionavel__icon-container").html(""), optionList.find("yduqs-card-selecionavel-item#card-selecionavel-" + finalAnswer + " .c-card-selecionavel__icon-container").html('<span class="material-icons c-card-selecionavel__icon">check_circle</span>'), optionList.find("yduqs-card-selecionavel-item#card-selecionavel-" + finalAnswer + " button").addClass("correct-answer"), $(this).closest(".question-block").addClass("answered"), $(".c-module-rating").addClass("d-none"), ratingModule = $(this).closest("module").find(".c-module-rating"), $(this).closest("module").find(".c-rating").hasClass("avaliado") || void 0 !== a && !1 !== a || (ratingModule.removeClass("d-none"), setTimeout(function () { ratingModule.addClass("open-rating") }, 100)) } else { var a, t; if (optionListOptions.removeAttr("final-answer"), a = (a = $(this).closest(".c-questions").find(`.question-block[question-reference="${e}"]`)).attr("exercise"), "en-us" == htmlLanguage) var i = "Try again", o = "Oops! Sorry, wrong answer!", c = "But don't worry, you can try it again after rereading the content."; else if ("es" == htmlLanguage) i = "Intentar nuevamente", o = "¡Vaya! Algo ha salido mal.", c = "Pero no te preocupes, puedes releer el contenido y volver a intentarlo"; else i = "Tentar novamente", o = "Algo não deu certo.", c = "Mas não se preocupe, você pode reler o conteúdo e tentar novamente."; void 0 !== a && !1 !== a ? ($(this).text(i), $(this).toggleClass("retry-button"), feedbackNegativeLocation.html(`\n                            <yduqs-card-destaque grade="2" outline="false" icon="dangerous">\n                            <yduqs-card-destaque-header>\n                                <h2 class="c-heading u-large">${o}</h2>\n                            </yduqs-card-destaque-header>\n                            <yduqs-card-destaque-body>\n                                <p class="c-paragraph">${c}</p>\n                            </yduqs-card-destaque-body>\n                        </yduqs-card-destaque>\n                        `)) : ($(this).text(i), $(this).toggleClass("retry-button"), feedbackNegativeLocation.html(`\n                            <yduqs-card-destaque grade="2" outline="false" icon="dangerous">\n                            <yduqs-card-destaque-header>\n                                <h2 class="c-heading u-large">${o}</h2>\n                            </yduqs-card-destaque-header>\n                            <yduqs-card-destaque-body>\n                                <p class="c-paragraph">${negativeFeedbacks[e]}</p>\n                            </yduqs-card-destaque-body>\n                        </yduqs-card-destaque>\n                        `)), void 0 !== (t = $(this).closest("yduqs-questions").attr("math")) && !1 !== t && reloadMath(), feedbackNegativeLocation.toggleClass("d-none"), optionList.find("yduqs-card-selecionavel-item .c-card-selecionavel__icon-container").html(""), optionList.find("yduqs-card-selecionavel-item#card-selecionavel-" + finalAnswer + " .c-card-selecionavel__icon-container").html('<span class="material-icons c-card-selecionavel__icon">dangerous</span>'), optionList.find("yduqs-card-selecionavel-item#card-selecionavel-" + finalAnswer + " button").addClass("wrong-answer"), $(this).closest(".question-block").addClass("answered") } else { if (optionListOptions.each(function () { $(this).removeClass("unchecked-answer"), $(this).removeAttr("disabled"), $(this).removeAttr("selected"), $(this).find(".c-card-selecionavel__icon-container").html(""), $(this).closest(".question-block").removeClass("answered"), removeActive = $(this).closest("yduqs-card-selecionavel").find(".c-card-selecionavel__control--active"), removeActive.removeClass("c-card-selecionavel__control--active"), removeActive.removeClass("chosen-alternative") }), "en-us" == htmlLanguage) var d = "Answer", r = "<p>Waiting for student response..</p>"; else if ("es" == htmlLanguage) d = "Responder.", r = "<p>Esperando la respuesta del estudiante...</p>"; else d = "Responder", r = "<p>Aguardando a resposta do aluno...</p>"; $(this).text(d), $(this).toggleClass("retry-button"), feedbackNegativeLocation.html(r), feedbackNegativeLocation.addClass("d-none"), btnTryAgain, optionList.removeAttr("final-answer"), optionList.find("yduqs-card-selecionavel-item#card-selecionavel-" + finalAnswer + " button").removeClass("wrong-answer"), optionList.find("button").removeClass("chosen-alternative") } } }) }), $(".c-questions yduqs-card-selecionavel").each(function (e) { question_answer = $(this).attr("correct-answer"), nameBlock = $(this).closest(".question-block"), nameBlock.attr("question-reference", e), printVersion || $(this).removeAttr("correct-answer"), question_answers.push(question_answer), $(this).find("div.question-label h2").html("Questão 0" + e) }); var questionOption = $(".question-block yduqs-card-selecionavel-item"); questionOption.each(function () { $(this).on("click", function () { if (blockDone = $(this).closest(".question-block").hasClass("answered"), !blockDone) { chosenLetterLocation = $(this).closest("yduqs-card-selecionavel-item").attr("id"); var e = chosenLetterLocation.substr(chosenLetterLocation.length - 1); finalAnswerAttr = $(this).closest("yduqs-card-selecionavel").attr("final-answer"), optionList = $(this).closest("yduqs-card-selecionavel"), optionListOptions = optionList.find("yduqs-card-selecionavel-item"), finalAnswerAttr != e ? ($(this).closest("yduqs-card-selecionavel").attr("final-answer", e), finalAnswer = optionList.attr("final-answer"), optionListOptions.each(function () { $(this).removeClass("chosen-answer"), $(this).removeAttr("disabled"), $(this).find(".c-card-selecionavel__icon-container").html(""), $(this).find("button").removeClass("c-card-selecionavel__control--active"), $(this).find("button").removeClass("chosen-alternative") }), optionList.find("yduqs-card-selecionavel-item#card-selecionavel-" + finalAnswer + " .c-card-selecionavel__icon-container").html('<span class="material-icons c-card-selecionavel__icon">done</span>'), optionList.find("yduqs-card-selecionavel-item#card-selecionavel-" + finalAnswer + " button").addClass("chosen-alternative")) : (optionList.find("yduqs-card-selecionavel-item#card-selecionavel-" + finalAnswer + " .c-card-selecionavel__icon-container").html(""), $(this).closest("yduqs-card-selecionavel").removeAttr("final-answer"), optionList.find("yduqs-card-selecionavel-item#card-selecionavel-" + finalAnswer + " button").removeClass("chosen-alternative"), finalAnswer = null) } }) }), $("body").append('<yduqs-notification id="question-warning" dismissible type="warning">Escolha uma alternativa</yduqs-notification>');