var yduqs_rating=$(".c-module-rating");yduqs_rating.each((function(index){var modulo=$(this).closest("module").attr("id");modulo=modulo.match(/\d+/)[0],$(this).addClass("feedback_modulo"+modulo+" "),starBlock=$(this).find(".star-rating"),starLabels=starBlock.find("label"),$(starLabels.get().reverse()).each((function(nota){$(this).attr("id","mod"+modulo+"_nota"+(nota+1)),$(window).width()>=768?$(this).attr("onclick",`rate_mod('${modulo}-${nota+1}');`):$(this).attr("onclick",`avaliarModuloMobile('${modulo}-${nota+1}');`)})),$(this).closest("yduqs-module-rating").attr("module",modulo),$(this).find(".c-module-rating__button-container button").addClass("btn_mod"+modulo),$(this).find(".c-module-rating__button-container button").attr("onclick","avaliarModulo('')"),$(this).find(".c-module-rating__icon-box").attr("onclick","closeRating('')")})),window.onresize=function(){yduqs_rating.each((function(index){var modulo=$(this).closest("module").attr("id");modulo=modulo.match(/\d+/)[0],$(this).addClass("feedback_modulo"+modulo+" "),starBlock=$(this).find(".star-rating"),starLabels=starBlock.find("label"),$(starLabels.get().reverse()).each((function(nota){$(this).attr("id","mod"+modulo+"_nota"+(nota+1)),$(window).width()>=768?$(this).attr("onclick",`rate_mod('${modulo}-${nota+1}');`):$(this).attr("onclick",`avaliarModuloMobile('${modulo}-${nota+1}');`)})),$(this).closest("yduqs-module-rating").attr("module",modulo),$(this).find(".c-module-rating__button-container button").addClass("btn_mod"+modulo),$(this).find(".c-module-rating__button-container button").attr("onclick","avaliarModulo('')"),$(this).find(".c-module-rating__icon-box").attr("onclick","closeRating('')")}))};var numeroDeModulos=$('module[id*="modulo"]').length;for(m=1;m<=numeroDeModulos;m++)window["mod"+m+"nota"]=0;function rate_mod(modNota){$(".c-module-rating__button-container button").removeAttr("disabled"),modNota=modNota.split(/\s*\-\s*/g),modulo=modNota[0],nota=modNota[1];let mod_star=$(".feedback_modulo"+modulo).find(".star-rating"),btn_star;$(".btn_mod"+modulo).attr("onclick",`avaliarModulo('${modulo}-${nota}')`),mod_star_label=mod_star.find("label"),star_empty=');"><i class="active material-icons large" aria-hidden="true">star</i></label>',star_full=');"><i class="active material-icons large gold-star" aria-hidden="true">star</i></label>',1==nota&&(mod_star_label.each((function(index){mod_star.html(`\n                <label id="mod${modulo}_nota5" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-5'${star_empty}\n                <label id="mod${modulo}_nota4" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-4'${star_empty}\n                <label id="mod${modulo}_nota3" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-3'${star_empty}\n                <label id="mod${modulo}_nota2" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-2'${star_empty}\n                <label id="mod${modulo}_nota1" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-1'${star_full}\n            `)})),window["mod"+modulo+"nota"]=nota),2==nota&&(mod_star_label.each((function(index){mod_star.html(`\n                <label id="mod${modulo}_nota5" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-5'${star_empty}\n                <label id="mod${modulo}_nota4" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-4'${star_empty}\n                <label id="mod${modulo}_nota3" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-3'${star_empty}\n                <label id="mod${modulo}_nota2" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-2'${star_full}\n                <label id="mod${modulo}_nota1" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-1'${star_full}\n            `)})),window["mod"+modulo+"nota"]=nota),3==nota&&(mod_star_label.each((function(index){mod_star.html(`\n                <label id="mod${modulo}_nota5" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-5'${star_empty}\n                <label id="mod${modulo}_nota4" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-4'${star_empty}\n                <label id="mod${modulo}_nota3" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-3'${star_full}\n                <label id="mod${modulo}_nota2" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-2'${star_full}\n                <label id="mod${modulo}_nota1" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-1'${star_full}\n            `)})),window["mod"+modulo+"nota"]=nota),4==nota&&(mod_star_label.each((function(index){mod_star.html(`\n                <label id="mod${modulo}_nota5" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-5'${star_empty}\n                <label id="mod${modulo}_nota4" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-4'${star_full}\n                <label id="mod${modulo}_nota3" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-3'${star_full}\n                <label id="mod${modulo}_nota2" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-2'${star_full}\n                <label id="mod${modulo}_nota1" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-1'${star_full}\n            `)})),window["mod"+modulo+"nota"]=nota),5==nota&&(mod_star_label.each((function(index){mod_star.html(`\n                <label id="mod${modulo}_nota5" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-5'${star_full}\n                <label id="mod${modulo}_nota4" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-4'${star_full}\n                <label id="mod${modulo}_nota3" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-3'${star_full}\n                <label id="mod${modulo}_nota2" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-2'${star_full}\n                <label id="mod${modulo}_nota1" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-1'${star_full}\n            `)})),window["mod"+modulo+"nota"]=nota)}function avaliarModuloMobile(modNota){if(modNota=modNota.split(/\s*\-\s*/g),modulo=modNota[0],nota=modNota[1],""==modNota)"en-us"==htmlLanguage?alert("Choose a grade for the section"):"es"==htmlLanguage?alert("Elija una calificación para el módulo"):alert("Escolha uma nota para o módulo");else{let mod_star=$(".feedback_modulo"+modulo).find(".star-rating"),btn_star=$(".btn_mod"+modulo);btn_star.attr("disabled","true"),mod_star_label=mod_star.find("label"),star_empty=');"><i class="active material-icons large" aria-hidden="true">star</i></label>',star_full=');"><i class="active material-icons large gold-star" aria-hidden="true">star</i></label>',1==nota&&(mod_star_label.each((function(index){mod_star.html(`\n                    <label id="mod${modulo}_nota5" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-5'${star_empty}\n                    <label id="mod${modulo}_nota4" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-4'${star_empty}\n                    <label id="mod${modulo}_nota3" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-3'${star_empty}\n                    <label id="mod${modulo}_nota2" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-2'${star_empty}\n                    <label id="mod${modulo}_nota1" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-1'${star_full}\n                `)})),window["mod"+modulo+"nota"]=nota),2==nota&&(mod_star_label.each((function(index){mod_star.html(`\n                    <label id="mod${modulo}_nota5" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-5'${star_empty}\n                    <label id="mod${modulo}_nota4" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-4'${star_empty}\n                    <label id="mod${modulo}_nota3" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-3'${star_empty}\n                    <label id="mod${modulo}_nota2" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-2'${star_full}\n                    <label id="mod${modulo}_nota1" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-1'${star_full}\n                `)})),window["mod"+modulo+"nota"]=nota),3==nota&&(mod_star_label.each((function(index){mod_star.html(`\n                    <label id="mod${modulo}_nota5" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-5'${star_empty}\n                    <label id="mod${modulo}_nota4" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-4'${star_empty}\n                    <label id="mod${modulo}_nota3" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-3'${star_full}\n                    <label id="mod${modulo}_nota2" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-2'${star_full}\n                    <label id="mod${modulo}_nota1" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-1'${star_full}\n                `)})),window["mod"+modulo+"nota"]=nota),4==nota&&(mod_star_label.each((function(index){mod_star.html(`\n                    <label id="mod${modulo}_nota5" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-5'${star_empty}\n                    <label id="mod${modulo}_nota4" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-4'${star_full}\n                    <label id="mod${modulo}_nota3" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-3'${star_full}\n                    <label id="mod${modulo}_nota2" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-2'${star_full}\n                    <label id="mod${modulo}_nota1" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-1'${star_full}\n                `)})),window["mod"+modulo+"nota"]=nota),5==nota&&(mod_star_label.each((function(index){mod_star.html(`\n                    <label id="mod${modulo}_nota5" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-5'${star_full}\n                    <label id="mod${modulo}_nota4" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-4'${star_full}\n                    <label id="mod${modulo}_nota3" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-3'${star_full}\n                    <label id="mod${modulo}_nota2" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-2'${star_full}\n                    <label id="mod${modulo}_nota1" style="display: inline-block;margin-left: -3px;" onclick="rate_mod('${modulo}-1'${star_full}\n                `)})),window["mod"+modulo+"nota"]=nota),block_stars=btn_star.closest(".feedback_modulo"+modulo),disable_stars=block_stars.find(".star-rating"),disable_stars_labels=disable_stars.find("label"),disable_stars_labels.each((function(index){$(this).removeAttr("onclick")})),closeFeedback=$("#mod"+modulo+"_nota"+nota).closest(".c-rating"),closeFeedback.removeClass("avaliar"),closeFeedback.addClass("avaliado"),closeFeedback.attr("disabled",""),msgFeedback=closeFeedback.find("h3"),"en-us"==htmlLanguage?msgFeedback.text("We received your review!"):"es"==htmlLanguage?msgFeedback.text("¡Recibimos tu reseña!"):msgFeedback.text("Recebemos sua avaliação!"),$("#avaliacaoTema").attr("nota-mod"+modulo,nota),swapStars=closeFeedback.find(".star-rating"),notaY='<label><i class="active material-icons large gold-star" aria-hidden="true">star</i></label>',notaN='<label><i class="active material-icons large" aria-hidden="true">star</i></label>',nota1=notaN.repeat(4)+notaY,nota2=notaN.repeat(3)+notaY.repeat(2),nota3=notaN.repeat(2)+notaY.repeat(3),nota4=notaN+notaY.repeat(4),nota5=notaY.repeat(5),notaFinal=parseInt(window.mod1nota)+parseInt(window.mod2nota)+parseInt(window.mod3nota)+parseInt(window.mod4nota),notaFinal/=numeroDeModulos,notaFinal=Math.ceil(notaFinal),modsAvaliados=$(".avaliado").length,modsAvaliados==numeroDeModulos&&(notaTema=$("#avaliacaoTema").find(".star-rating"),$("#avaliacaoTema").removeClass("d-none"),$("#avaliacaoTema").attr("nota-tema",notaFinal),1==notaFinal?notaTema.html(nota1):2==notaFinal?notaTema.html(nota2):3==notaFinal?notaTema.html(nota3):4==notaFinal?notaTema.html(nota4):5==notaFinal&&notaTema.html(nota5))}$(`.c-module-rating__button-container .btn_mod${modulo}`).addClass("d-none"),setTimeout((function(){$(".c-module-rating").removeClass("open-rating")}),1e3),setTimeout((function(){$(".c-module-rating").addClass("d-none")}),2e3)}function avaliarModulo(modNota){console.log("avaliando..."),modNota=modNota.split(/\s*\-\s*/g),modulo=modNota[0],nota=modNota[1],closeFeedback=$("#mod"+modulo+"_nota"+nota).closest(".c-rating"),closeFeedback.removeClass("avaliar"),closeFeedback.addClass("avaliado"),closeFeedback.attr("disabled",""),msgFeedback=closeFeedback.find("h3"),"en-us"==htmlLanguage?msgFeedback.text("We received your review!"):"es"==htmlLanguage?msgFeedback.text("¡Recibimos tu reseña!"):msgFeedback.text("Recebemos sua avaliação!"),$("#avaliacaoTema").attr("nota-mod"+modulo,nota),swapStars=closeFeedback.find(".star-rating"),notaY='<label><i class="active material-icons large gold-star" aria-hidden="true">star</i></label>',notaN='<label><i class="active material-icons large" aria-hidden="true">star</i></label>',nota1=notaN.repeat(4)+notaY,nota2=notaN.repeat(3)+notaY.repeat(2),nota3=notaN.repeat(2)+notaY.repeat(3),nota4=notaN+notaY.repeat(4),nota5=notaY.repeat(5),1==nota?(swapStars.html(nota1),window["mod"+modulo+"nota"]=nota):2==nota?(swapStars.html(nota2),window["mod"+modulo+"nota"]=nota):3==nota?(swapStars.html(nota3),window["mod"+modulo+"nota"]=nota):4==nota?(swapStars.html(nota4),window["mod"+modulo+"nota"]=nota):5==nota&&(swapStars.html(nota5),window["mod"+modulo+"nota"]=nota),notaFinal=parseInt(window.mod1nota)+parseInt(window.mod2nota)+parseInt(window.mod3nota)+parseInt(window.mod4nota),notaFinal/=numeroDeModulos,notaFinal=Math.ceil(notaFinal),modsAvaliados=$(".avaliado").length,modsAvaliados==numeroDeModulos&&(notaTema=$("#avaliacaoTema").find(".star-rating"),$("#avaliacaoTema").removeClass("d-none"),$("#avaliacaoTema").removeClass("d-none"),$("#avaliacaoTema").attr("nota-tema",notaFinal),1==notaFinal?notaTema.html(nota1):2==notaFinal?notaTema.html(nota2):3==notaFinal?notaTema.html(nota3):4==notaFinal?notaTema.html(nota4):5==notaFinal&&notaTema.html(nota5)),$(`.c-module-rating__button-container .btn_mod${modulo}`).addClass("d-none"),setTimeout((function(){$(".c-module-rating").removeClass("open-rating")}),1e3),setTimeout((function(){$(".c-module-rating").addClass("d-none")}),2e3)}function closeRating(){yduqs_rating.removeClass("open-rating"),setTimeout((function(){yduqs_rating.addClass("d-none")}),1e3)}$("module#conclusao").after('\n<yduqs-section class="mt-0">\n    <div id="avaliacaoTema" class="temaFeedback d-none">\n        <h3 class="text-center py-5">Avaliação do tema:</h3>\n        <div class="star-rating"></div>\n    </div>\n</yduqs-section>\n'),window.mod1nota="0",window.mod2nota="0",window.mod3nota="0",window.mod4nota="0";