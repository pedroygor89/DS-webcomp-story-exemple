import{r as s,c as i,h as t,F as n,a as l}from"./p-3b8a929f.js";const e=class{constructor(t){s(this,t),this.challengeEnd=i(this,"challengeEnd",7),this.error=[],this.step="loading"}setError(s){const i=[...this.error,s];this.error=i}validateFetchedData(s){s?s.items&&s.items.length||this.setError(t("span",null,"yduqs-lab-questions needs a ",t("strong",null,"valid `items`"),".")):this.setError(t("span",null,"yduqs-lab-questions needs a ",t("strong",null,"valid `config response`"),"."))}async init(){return await fetch(this.config).then((s=>s.json())).then((s=>{var i;this.validateFetchedData(s),this.items=null==s?void 0:s.items,(null===(i=this.error)||void 0===i?void 0:i.length)||(this.step="info")})).catch((s=>{this.setError(t("span",null,"Fetched response is invalid:",null==s?void 0:s.toString()))}))}componentWillLoad(){this._id&&this.config?this.init():(this._id||this.setError(t("span",null,"yduqs-lab-questions needs a ",t("strong",null,"valid attribute `id`"),".")),this.config||this.setError(t("span",null,"yduqs-lab-questions needs a ",t("strong",null,"valid attribute `config`"),".")))}render(){var s,i;return t(l,{class:"c-lab-questions",ref:s=>this.hostElem=s},"loading"!==this.step?t(n,null,null===(s=this.items)||void 0===s?void 0:s.map(((s,i)=>{var n;return t("yduqs-quiz",{dataid:`quiz-${i}`,question:s.text,description:"Description da pergunta",answers:null===(n=s.answers)||void 0===n?void 0:n.map(((s,i)=>({id:i,label:s.label,value:s.value})))})}))):t(n,null,"Loading...",(null===(i=this.error)||void 0===i?void 0:i.length)>0&&t("dl",null,t("dt",null,"Errors"),this.error.map((s=>t("dd",null,s))))))}},a=class{constructor(t){s(this,t),this.quizSelect=i(this,"quizSelect",7),this.overline="",this.indexType="letter",this.letters="abcdefghijklmnopqrstuvxwyz".split("")}getIndex(s){switch(this.indexType){case"number":return s+1;default:return this.letters[s]}}handleSelectItem(s){this.selected=s.id,this.quizSelect.emit(s)}render(){var s;return t(l,{class:"c-quiz"},this.overline&&t("h6",{class:"c-quiz-overline"},this.overline),t("h4",{class:"c-quiz-title"},this.question),this.description&&t("div",{class:"c-quiz-description",innerHTML:this.description}),null===(s="string"==typeof this.answers?JSON.parse(this.answers):this.answers)||void 0===s?void 0:s.map(((s,i)=>t("label",{class:"c-quiz-option "+(s.id===this.selected?"active":"")},t("input",{type:"radio",name:`quiz-${this.dataid}`,onInput:()=>this.handleSelectItem(s)}),t("strong",{class:"index"},this.getIndex(i)),t("span",{class:"text"},s.label),t("i",{class:"material-icons icon"},"done")))))}};export{e as yduqs_lab_questions,a as yduqs_quiz}