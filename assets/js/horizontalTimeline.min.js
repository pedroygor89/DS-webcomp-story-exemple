function HorizontalTimeline(e) { this.render(e) } HorizontalTimeline.prototype.render = function (e) { e.querySelectorAll("horizontal-timeline").forEach(e => { let t = document.createElement("section"); t.classList.add("cd-horizontal-timeline"), t.appendChild(this.buildDatesLine()), t.appendChild(this.buildDatesContent()), this.putSlides(e, t), e.parentElement.replaceChild(t, e) }), this.configHorizontalTimeline() }, HorizontalTimeline.prototype.buildDatesLine = function () { let e = document.createElement("div"); e.classList.add("timeline"); let t = document.createElement("div"); t.classList.add("events-wrapper"); let n = document.createElement("div"); n.classList.add("events"); let i = document.createElement("ol"); i.classList.add("container-points"); let a = document.createElement("span"); a.classList.add("filling-line"), a.setAttribute("aria-hidden", "true"); let l = document.createElement("ul"); l.classList.add("cd-timeline-navigation"); let r = document.createElement("li"), o = document.createElement("a"); o.classList.add("prev", "inactive"), o.setAttribute("href", "#0"); let s = document.createElement("li"), d = document.createElement("a"); return d.classList.add("next"), d.setAttribute("href", "#0"), n.appendChild(i), n.appendChild(a), t.appendChild(n), r.appendChild(o), l.appendChild(r), s.appendChild(d), l.appendChild(s), e.appendChild(t), e.appendChild(l), e }, HorizontalTimeline.prototype.buildDatesContent = function () { let e = document.createElement("div"); e.classList.add("events-content"); let t = document.createElement("ol"); return t.classList.add("container-content"), e.appendChild(t), e }, HorizontalTimeline.prototype.putSlides = function (e, t) { e.querySelectorAll("slide").forEach((e, n) => { if (e.dataset.date && e.dataset.textPoint) { let i = document.createElement("li"), a = document.createElement("a"); a.setAttribute("href", "#0"), a.dataset.date = e.dataset.date, a.innerHTML = e.dataset.textPoint, i.appendChild(a), t.querySelector(".container-points").appendChild(i); let l = document.createElement("li"); l.dataset.date = e.dataset.date, l.innerHTML = e.innerHTML, t.querySelector(".container-content").appendChild(l), 0 === n && (a.classList.add("selected"), l.classList.add("selected")) } else console.warn("############"), console.warn("####### ATENÇÃO: Um slide do recurso Timeline Horizontal não foi definido corretamente no arquivo index.html."), console.warn("############") }) }, HorizontalTimeline.prototype.configHorizontalTimeline = function () { var e = $(".cd-horizontal-timeline"), t = 80; function n(e, n, i) { var a = d(e.eventsWrapper), r = Number(e.timelineWrapper.css("width").replace("px", "")); "next" == i ? l(e, a - r + t, r - n) : l(e, a + r - t) } function a(e, t, n) { var i = e.eventsContent.find(".selected"); if (("next" == n ? i.next() : i.prev()).length > 0) { var a = e.eventsWrapper.find(".selected"), c = "next" == n ? a.parent("li").next("li").children("a") : a.parent("li").prev("li").children("a"); r(c, e.fillingLine, t), o(c, e.eventsContent), c.addClass("selected"), a.removeClass("selected"), s(c), function (e, t, n, i) { var a = window.getComputedStyle(t.get(0), null), r = Number(a.getPropertyValue("left").replace("px", "")), o = Number(n.timelineWrapper.css("width").replace("px", "")), i = Number(n.eventsWrapper.css("width").replace("px", "")), s = d(n.eventsWrapper); ("next" == e && r > o - s || "prev" == e && r < -s) && l(n, o / 2 - r, o - i) }(n, c, e, t) } } function l(e, t, n) { t = t > 0 ? 0 : t, c(e.eventsWrapper.get(0), "translateX", (t = void 0 !== n && t < n ? n : t) + "px"), 0 == t ? e.timelineNavigation.find(".prev").addClass("inactive") : e.timelineNavigation.find(".prev").removeClass("inactive"), t == n ? e.timelineNavigation.find(".next").addClass("inactive") : e.timelineNavigation.find(".next").removeClass("inactive") } function r(e, t, n) { var i = window.getComputedStyle(e.get(0), null), a = i.getPropertyValue("left"), l = i.getPropertyValue("width"), r = (a = Number(a.replace("px", "")) + Number(l.replace("px", "")) / 2) / n; c(t.get(0), "scaleX", r) } function o(e, t) { var n = e.data("date"), i = t.find(".selected"), a = t.find('[data-date="' + n + '"]'), l = a.height(); if (a.index() > i.index()) var r = "selected enter-right", o = "leave-left"; else r = "selected enter-left", o = "leave-right selected"; a.attr("class", r), i.attr("class", o).one("webkitAnimationEnd oanimationend msAnimationEnd animationend", function () { i.removeClass("leave-right leave-left"), a.removeClass("enter-left enter-right") }), t.css("height", "calc(" + l + "px + 40px)") } function s(e) { e.parent("li").prevAll("li").children("a").addClass("older-event").end().end().nextAll("li").children("a").removeClass("older-event") } function d(e) { var t = window.getComputedStyle(e.get(0), null); if ((n = t.getPropertyValue("-webkit-transform") || t.getPropertyValue("-moz-transform") || t.getPropertyValue("-ms-transform") || t.getPropertyValue("-o-transform") || t.getPropertyValue("transform")).indexOf("(") >= 0) var n, i = (n = (n = (n = n.split("(")[1]).split(")")[0]).split(","))[4]; else i = 0; return Number(i) } function c(e, t, n) { e.style["-webkit-transform"] = t + "(" + n + ")", e.style["-moz-transform"] = t + "(" + n + ")", e.style["-ms-transform"] = t + "(" + n + ")", e.style["-o-transform"] = t + "(" + n + ")", e.style.transform = t + "(" + n + ")" } function p(e, t) { return Math.round(t - e) } function m(e) { for (var t = e.offsetTop, n = e.offsetLeft, i = e.offsetWidth, a = e.offsetHeight; e.offsetParent;)t += (e = e.offsetParent).offsetTop, n += e.offsetLeft; return t < window.pageYOffset + window.innerHeight && n < window.pageXOffset + window.innerWidth && t + a > window.pageYOffset && n + i > window.pageXOffset } function f() { return window.getComputedStyle(document.querySelector(".cd-horizontal-timeline"), "::before").getPropertyValue("content").replace(/'/g, "").replace(/"/g, "") } e.length > 0 && function (e) { e.each(function () { var e, l, d = $(this), c = {}; c.timelineWrapper = d.find(".events-wrapper"), c.eventsWrapper = c.timelineWrapper.children(".events"), c.fillingLine = c.eventsWrapper.children(".filling-line"), c.timelineEvents = c.eventsWrapper.find("a"), c.timelineDates = (e = c.timelineEvents, l = [], e.each(function () { var e = $(this).data("date").split("/"), t = new Date(e[2], e[1] - 1, e[0]); l.push(t) }), l), c.eventsMinLapse = function (e) { var t = []; for (i = 1; i < e.length; i++) { var n = p(e[i - 1], e[i]); t.push(n) } return Math.min.apply(null, t) }(c.timelineDates), c.timelineNavigation = d.find(".cd-timeline-navigation"), c.eventsContent = d.children(".events-content"), function (e, t) { for (i = 0; i < e.timelineDates.length; i++) { var n = p(e.timelineDates[0], e.timelineDates[i]), a = Math.round(n / e.eventsMinLapse) + 2; e.timelineEvents.eq(i).css("left", a * t + "px") } }(c, t); var u = function (e, t) { var n = p(e.timelineDates[0], e.timelineDates[e.timelineDates.length - 1]) / e.eventsMinLapse, i = (n = Math.round(n) + 4) * t; return e.eventsWrapper.css("width", i + "px"), r(e.timelineEvents.eq(0), e.fillingLine, i), i }(c, t); d.addClass("loaded"), c.timelineNavigation.on("click", ".next", function (e) { e.preventDefault(), n(c, u, "next") }), c.timelineNavigation.on("click", ".prev", function (e) { e.preventDefault(), n(c, u, "prev") }), c.eventsWrapper.on("click", "a", function (e) { e.preventDefault(), c.timelineEvents.removeClass("selected"), $(this).addClass("selected"), s($(this)), r($(this), c.fillingLine, u), o($(this), c.eventsContent) }), c.eventsContent.on("swipeleft", function () { var e = f(); "mobile" == e && a(c, u, "next") }), c.eventsContent.on("swiperight", function () { var e = f(); "mobile" == e && a(c, u, "prev") }), $(document).keyup(function (e) { "37" == e.which && m(d.get(0)) ? a(c, u, "prev") : "39" == e.which && m(d.get(0)) && a(c, u, "next") }) }) }(e) };